import {LevelMap, Pos} from './map_logic';
import {Labyrinth} from './labyrinth';
import {SpawnerState, Target, TargetSpawner} from './target';

const bateau = new LevelMap('' +
  '                                           ~~~~~~~~~~~~~\n' +
  '                                                ~~~~~~~~\n' +
  '                                                 ~~~~~~~\n' +
  '                                              ~~~~~~~~~~\n' +
  '                                    ##        ~~~~~~~~~~\n' +
  '                                 *********        ~~~~~~\n' +
  '                               ***********          ~~~~\n' +
  '                             *************           ~~~\n' +
  '                             **************      ~~~~~~~\n' +
  '                             **************     ~~~~~~~~\n' +
  '                             **************  ~~~~~~~~~~~\n' +
  '                              ************~~~~~~~~~~~~~~\n' +
  '                         ~~~~~~~~********~~~~~~~~~~~~~~~\n' +
  '                    ~~~~~~~~~~~~~~~~##~~~~~~~~~~~~~~~~~~\n' +
  '               ~~~~~~~############################~~~###\n' +
  '            ~~~~~~~~~~~#................................\n' +
  '          ~~~~~~~~~~~~~~##.......................#~~~###\n' +
  '           ~~~~~~~~~~~~~~~#######################~~~~~~~\n' +
  '               ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n' +
  '                         ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n' +
  '                                 ~~~~~~~~~~~~~~~~~~~~~~~\n' +
  '                                          ~~~~~~~~~~~~~~',
  '' +
  '                                                        \n' +
  '                                                        \n' +
  '                                                        \n' +
  '                                                        \n' +
  '                                    ##                  \n' +
  '                                                        \n' +
  '                                                        \n' +
  '                                                        \n' +
  '                                                        \n' +
  '                                                        \n' +
  '                                                        \n' +
  '                                                        \n' +
  '                                                        \n' +
  '                                    ##                  \n' +
  '                      ############################   ###\n' +
  '                       #     @                         1\n' +
  '                        ##                       #   ###\n' +
  '                          #######################       \n' +
  '                                                        \n' +
  '                                                        \n' +
  '                                                        \n' +
  '                                                        ',
  new Map([
    ['1', 'mission'],
  ]),
  new Map([
    ['~', '#0000FF'],
    ['.', '#FF7700'],
    ['#', '#AA3300'],
    ['>', '#FFFFFF'],
  ]),
  {
    'en': {
      'Thirsty for adventure,': new Pos(4, 3),
      'you sailed to new lands.': new Pos(4, 4),
      'After quiet and storm,': new Pos(4, 6),
      'filled with hope, you': new Pos(4, 7),
      'finally land.': new Pos(4, 8),
    },
    'fr': {
      'En soif de nouvelles aventures,': new Pos(4, 3),
      'vous avez pris le large.': new Pos(4, 4),
      'Après calme et tempêtes,': new Pos(4, 6),
      'rempli d\'espoirs, vous': new Pos(4, 7),
      'accostez sur une': new Pos(4, 8),
      'terre nouvelle.': new Pos(4, 9),
    },
  },
  '#000005',
  undefined,
  undefined,
  undefined,
  undefined);

const mission = new LevelMap('' +
  '                                                        \n' +
  '         ***************************************        \n' +
  '        *                                       *       \n' +
  '       *             ------------                *      \n' +
  '       *            ------[]------         $     *      \n' +
  '       *            --------------  $      $     *      \n' +
  '       *         $  --------------  $      $     *      \n' +
  '   ~~~~*  $   $  $  --------------  $  $   $     *~~~~~ \n' +
  '  ~~~~~~*                                        *~~~~~~\n' +
  '~~~~~~~~~***********************     ************~~~~~~~\n' +
  '~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~**  *~~~~~~~~~~~~~~~~~~~\n' +
  '~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~**~~~~~~~~~~~~~~~~~~~~\n' +
  '~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~###*####################\n' +
  '################################...m....................\n' +
  '........................................................\n' +
  '################################........................\n' +
  '~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~########################\n' +
  '~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ \n' +
  '    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~        \n' +
  '           ~~~~~~~~~~~~~~~~~~                           \n' +
  '               ~~~~~~~~~~~                              \n' +
  '                                                        ',
  '' +
  '                                                        \n' +
  '                                                        \n' +
  '                                                        \n' +
  '                                                        \n' +
  '                                                        \n' +
  '                                                        \n' +
  '                                                        \n' +
  '                                                        \n' +
  '                                                        \n' +
  '                                                        \n' +
  '                                                        \n' +
  '                                                        \n' +
  '                                ### ####################\n' +
  '################################                       2\n' +
  '1                                                      2\n' +
  '################################                       2\n' +
  '                                ########################\n' +
  '                                                        \n' +
  '                                                        \n' +
  '                                                        \n' +
  '                                                        \n' +
  '                                                        ',
  new Map([
    ['1', 'bateau'],
    ['2', 'outside'],
  ]),
  new Map([
    ['~', '#0000FF'],
    ['.', '#FF7700'],
    ['#', '#AA3300'],
    ['*', '#FFFFFF'],
  ]),
  undefined,
  '#000005',
  undefined,
  undefined,
  undefined,
  undefined,
);

const outside = new LevelMap('' +
  '      """"""              #...........#                 \n' +
  '       """"               #............#     """""""    \n' +
  '                          #.............#      """"""   \n' +
  '                          #..............#####          \n' +
  '                         #....................#####     \n' +
  '                        #..........................#####\n' +
  '     """"              #................................\n' +
  '    """"""            #.................................\n' +
  '     """"           ##..................................\n' +
  '                 ###....................................\n' +
  '            #####.....................................##\n' +
  '       #####........................................##  \n' +
  '#######...........................................##    \n' +
  '................................................##      \n' +
  '...........................................#####        \n' +
  '....................................#######             \n' +
  '#######...................##########                    \n' +
  '       ##.............####                      ""      \n' +
  '         ##........###                         """"     \n' +
  '           ########                             ""      \n' +
  '                     """                                \n' +
  '                    """""                               ',
  '' +
  '                          #11111111111#                 \n' +
  '                          #            #                \n' +
  '                          #             #               \n' +
  '                          #              #####          \n' +
  '                         #                    #####     \n' +
  '                        #                          #####\n' +
  '                       #                               3\n' +
  '                      #                                3\n' +
  '                    ##         ttt                     3\n' +
  '                 ###           ttt                     3\n' +
  '            #####              ttt                    ##\n' +
  '       #####                                        ##  \n' +
  '#######                                           ##    \n' +
  '2                                               ##      \n' +
  '2                                          #####        \n' +
  '2                                   #######             \n' +
  '#######                   ##########                    \n' +
  '       ##             ####                              \n' +
  '         ##        ###                                  \n' +
  '           ########                                     \n' +
  '                                                        \n' +
  '                                                        ',
  new Map([
    [ '1', 'spike' ],
    [ '2', 'mission' ],
    [ '3', 'training' ],
  ]),
  new Map([
    ['$', '#FF00AA'],
    ['#', '#555555'],
    ['.', '#333333'],
    ['"', '#00FF00'],
    ['^', '#FFFF00'],
    ['>', '#FFFFFF'],
    ['<', '#FFFFFF'],
  ]),
  undefined,
  '#050505',
  undefined,
  undefined,
  undefined,
  undefined,
);

const training = new LevelMap('' +
  '                       #~~~~~~~~~~~~~~~~#               \n' +
  '                       #~~~~~~~~~~~~~~~~#               \n' +
  '                      #~~~........~~~~~~~#              \n' +
  '#####               ##~~..............~~~~##            \n' +
  '.....####        ###........................###         \n' +
  '.........########..............................###      \n' +
  '..................................................######\n' +
  '.....######.............................................\n' +
  '#####      #####........................................\n' +
  '                ##......................................\n' +
  '                  #.....................................\n' +
  '                   #.................................###\n' +
  '                   #................................#   \n' +
  '                  #...............................##    \n' +
  '                 #~~~~.........................###      \n' +
  '               ##~~~~~~...............~~~~~####         \n' +
  '            ###~~~~~~~~~~......~~~~~~~~####             \n' +
  '          ##~~~~~~~~~~~~~~~~~~~~~~~~~~#                 \n' +
  '         #~~~~~~~~~~~~~~~~~~~~~~~~~~~#                  \n' +
  '        #~~~~~~~~~~~~~~~~~~~~~~~~~~~~~##                \n' +
  '       #~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~##              \n' +
  '       #~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~#             ',
  '' +
  '                       #                #               \n' +
  '                       #                #               \n' +
  '                      #                  #              \n' +
  '#####               ##                    ##            \n' +
  '3    ####        ###                        ###         \n' +
  '3        ########                              ###      \n' +
  '3 @                                               ######\n' +
  '3    ######                                            1\n' +
  '#####      #####                                       1\n' +
  '                ##                                     1\n' +
  '                  #                                    1\n' +
  '                   #                                 ###\n' +
  '                   #                                #   \n' +
  '                  #                               ##    \n' +
  '                 #                             ###      \n' +
  '               ##          *               ####         \n' +
  '            ###                        ####             \n' +
  '          ##                          #                 \n' +
  '         #                           #                  \n' +
  '        #                             ##                \n' +
  '       #                                ##              \n' +
  '       #                                  #             ',
  new Map([
    [ '1', 'leave_rock' ],
    [ '3', 'outside' ],
  ]),
  new Map([
    [ '~', '#0000FF'],
  ]),
  undefined,
  '#020302',
  undefined,
  new TargetSpawner(function(state: SpawnerState): void {
    state.tick = (state.tick + 1) % 20;

    if (state.tick >= 16) {
      return;
    }

    state.targets.push(new Target(new Pos(24 + 16 - state.tick, -1), 'O', 3, 3));
    state.targets.push(new Target(new Pos(24 + 15 - state.tick, -1), 'O', 3, 3));
  }, function(): Pos {
    return new Pos(0, 1);
  }, function(pv: number): string {
    if (pv === 3) {
      return '#00FF00';
    } else if (pv === 2) {
      return '#FF9900';
    } else {
      return '#FF0000';
    }
  }),
  undefined,
  undefined,
);

const spike = new LevelMap('' +
  '                      #.................#               \n' +
  '                      #.................#               \n' +
  '                      #.................#               \n' +
  '                     #...................#              \n' +
  '                      #..................#              \n' +
  '     ~~~~~            #.................#               \n' +
  '   ~~~~~~~~~~~~      #..................#               \n' +
  '      ~~~~~~         #..................#               \n' +
  '                     #..................#      ~~~~     \n' +
  '                     #..................#     ~~~~~~~~  \n' +
  '                     #..................#       ~~~~~   \n' +
  '                     #...................#              \n' +
  '                     #...................#              \n' +
  '                      #..................#              \n' +
  '                      #..................#              \n' +
  '                      #..................#              \n' +
  '                       #.................#              \n' +
  '         ~~~~~~        #................#               \n' +
  '      ~~~~~~~          #...............#                \n' +
  '         ~~~~~~        #...............#                \n' +
  '                        #.............#                 \n' +
  '                         #...........#                  ',
  '' +
  '                      #22222222222222222#               \n' +
  '                      #                 #               \n' +
  '                      #                 #               \n' +
  '                     #                   #              \n' +
  '                      #                  #              \n' +
  '                      #                 #               \n' +
  '                     #                  #               \n' +
  '                     #                  #               \n' +
  '                     #                  #               \n' +
  '                     #                  #               \n' +
  '                     #                  #               \n' +
  '                     #                   #              \n' +
  '                     #                   #              \n' +
  '                      #                  #              \n' +
  '                      #                  #              \n' +
  '                      #                  #              \n' +
  '                       #                 #              \n' +
  '                       #                #               \n' +
  '                       #               #                \n' +
  '                       #      @        #                \n' +
  '                        #             #                 \n' +
  '                         #11111111111#                  ',
  new Map([
    [ '1', 'outside' ],
    [ '2', 'spike2' ],
  ]),
  new Map([
    ['#', '#555555'],
    ['~', '#0000FF'],
  ]),
  undefined,
  '#050505',
  undefined,
  new TargetSpawner(function(state: SpawnerState): void {
    const m = 34;
    state.tick = (state.tick + 1) % (m - 2);
    let n = state.tick;

    if (state.tick >= m / 2) {
      n = m - 2 - state.tick;
    }

    state.targets.push(new Target(new Pos(23 + n, -1), 'v', 1, 1));
  }, function(): Pos {
    return new Pos(0, 1);
  }, function(pv: number): string {
    return '#00FF00';
  }),
  undefined,
  undefined,
);

const spike2 = new LevelMap('' +
  '                      #.................#               \n' +
  '                      #.................#               \n' +
  '                      #.................#               \n' +
  '                      #.................#               \n' +
  '                      #.................#               \n' +
  '     ~~~~~            #.................#               \n' +
  '   ~~~~~~~~~~~~       #.................#               \n' +
  '      ~~~~~~          #.................#               \n' +
  '                      #.................#      ~~~~     \n' +
  '                      #.................#     ~~~~~~~~  \n' +
  '                      #.................#       ~~~~~   \n' +
  '                      #.................#               \n' +
  '                      #.................#               \n' +
  '                      #.................#               \n' +
  '                      #.................#               \n' +
  '                      #.................#               \n' +
  '                      #.................#               \n' +
  '         ~~~~~~       #.................#               \n' +
  '      ~~~~~~~          #.................#              \n' +
  '         ~~~~~~        #.................#              \n' +
  '                       #.................#              \n' +
  '                       #.................#              ',
  '' +
  '                      #11111111111111111#               \n' +
  '                      #                 #               \n' +
  '                      #                 #               \n' +
  '                      #                 #               \n' +
  '                      #                 #               \n' +
  '                      #                 #               \n' +
  '                      #                 #               \n' +
  '                      #                 #               \n' +
  '                      #                 #               \n' +
  '                      #                 #               \n' +
  '                      #                 #               \n' +
  '                      #                 #               \n' +
  '                      #                 #               \n' +
  '                      #                 #               \n' +
  '                      #                 #               \n' +
  '                      #                 #               \n' +
  '                      #                 #               \n' +
  '                      #                 #               \n' +
  '                       #                 #              \n' +
  '                       #       @         #              \n' +
  '                       #                 #              \n' +
  '                       #22222222222222222#              ',
  new Map([
    [ '1', 'sword_treasure' ],
    [ '2', 'spike' ],
  ]),
  new Map([
    ['#', '#555555'],
    ['~', '#0000FF'],
  ]),
  undefined,
  '#050505',
  undefined,
  new TargetSpawner(function(state: SpawnerState): void {
    const m = 34;
    state.tick = (state.tick + 1) % (m - 2);
    let n = state.tick;

    if (state.tick >= m / 2) {
      n = m - 2 - state.tick;
    }

    state.targets.push(new Target(new Pos(23 + n, -1), 'v', 1, 1));
    state.targets.push(new Target(new Pos(22 + n, -1), 'v', 1, 1));
  }, function(): Pos {
    return new Pos(0, 1);
  }, function(pv: number): string {
    return '#00FF00';
  }),
  undefined,
  undefined,
);

const sword_treasure = new LevelMap('' +
  '                                                        \n' +
  '                                             ~~~~       \n' +
  '    ~~~~                                       ~~~~     \n' +
  '      ~~~~~~                                            \n' +
  '              #############################             \n' +
  '         #####.............................####         \n' +
  '       ##......................................##       \n' +
  '      #..........................................#      \n' +
  '     #............................................#     \n' +
  '     #............................................#     \n' +
  '     #............................................#     \n' +
  '     #............................................#     \n' +
  '      #..........................................#      \n' +
  '       ##......................................##       \n' +
  '         #####............................#####         \n' +
  '              ####....................####              \n' +
  '                  #..................#       ~~         \n' +
  '      ~~~~~~      #..................#        ~~~       \n' +
  '   ~~~~~~~        #..................#                  \n' +
  '      ~~~~~~      #..................#                  \n' +
  '                  #..................#                  \n' +
  '                   #.................#                  ',
  '' +
  '                                                        \n' +
  '                                                        \n' +
  '                                                        \n' +
  '                                                        \n' +
  '              #############################             \n' +
  '         #####                             ####         \n' +
  '       ##                                      ##       \n' +
  '      #                                          #      \n' +
  '     #                                            #     \n' +
  '     #                                            #     \n' +
  '     #          $                     /           #     \n' +
  '     #                                            #     \n' +
  '      #                                          #      \n' +
  '       ##                                      ##       \n' +
  '         #####                            #####         \n' +
  '              ####                    ####              \n' +
  '                  #                  #                  \n' +
  '                  #                  #                  \n' +
  '                  #                  #                  \n' +
  '                  #                  #                  \n' +
  '                  #                  #                  \n' +
  '                   #11111111111111111#                  ',
  new Map([
    [ '1', 'spike2' ],
  ]),
  new Map([
    ['#', '#555555'],
    ['~', '#0000FF'],
  ]),
  undefined,
  '#050500',
  undefined,
  undefined,
  undefined,
  undefined,
);

const leave_rock = new LevelMap('' +
  '                       #~~~~.~~~~~~~~~~~#               \n' +
  '     """               #~~~...~~~~~~~~~~#       """     \n' +
  '       """            #~........~~~~~~~~~#       """"   \n' +
  '                    ##~..............~~~~~##            \n' +
  '                 ###........................###         \n' +
  '         ########..............................##       \n' +
  '#########........................................#      \n' +
  '..................................................#     \n' +
  '..................................................#     \n' +
  '..................................................#     \n' +
  '..................................................#     \n' +
  '#######...........................................#     \n' +
  '       #####.....................................#      \n' +
  '            ###.................................#       \n' +
  '               ###.............................#        \n' +
  '                  ####~~~~~~~......~~~~~~~~~###         \n' +
  '    ""                ###~~~~~~~~~~~~~~~~###            \n' +
  '   """"                  ################               \n' +
  '    """"""                                         ""   \n' +
  '      """""""                                   """"""  \n' +
  '                                                 ""     \n' +
  '                                                        ',
  '' +
  '                       #2222222222222222#               \n' +
  '                       #                #               \n' +
  '                      #                  #              \n' +
  '                    ##xxxxxxxxxxxxxxxxxxxx##            \n' +
  '                 ###                        ###         \n' +
  '         ########                              ##       \n' +
  '#########                                        #      \n' +
  '1                                                 #     \n' +
  '1   @                                             #     \n' +
  '1                                                 #     \n' +
  '1                                                 #     \n' +
  '#######                                           #     \n' +
  '       #####                                     #      \n' +
  '            ###                                 #       \n' +
  '               ###                             #        \n' +
  '                  ####                      ###         \n' +
  '                      ###                ###            \n' +
  '                         ################               \n' +
  '                                                        \n' +
  '                                                        \n' +
  '                                                        \n' +
  '                                                        ',
  new Map([
    [ '1', 'training' ],
    [ '2', 'sword_only' ],
  ]),
  new Map([
    [ '~', '#0000FF'],
    [ '"', '#00FF00'],
  ]),
  undefined,
  '#020302',
  undefined,
  new TargetSpawner(function(state: SpawnerState): void {
    if (state.targets.length > 0) {
      state.tick = 9;
      return;
    }

    state.tick--;

    if (state.tick <= 0) {
      state.targets.push(new Target(new Pos(31, 13), 'O', 1, 1));
      state.tick = 9;
    }

  }, function(): Pos {
    return new Pos(0, 0);
  }, function(pv: number): string {
    return '#00FF00';
  }),
  function(l: Labyrinth, symbol: string): boolean {
    return l.current_map_data.spawner.targets.length !== 0;
  },
  '#FF8800'
);

const sword_only = new LevelMap('' +
  '                       #~~~~.~~~~~~~~~~#                \n' +
  '          """          #~~.....~~~~~~~~~#    """        \n' +
  '        """           #~~~........~~~~~~~#    """"      \n' +
  '                    ##~~..............~~~~##            \n' +
  '                 ###........................#           \n' +
  '         ########............................#          \n' +
  '#########.....................................#         \n' +
  '...............................................#        \n' +
  '...............................................#        \n' +
  '...............................................#        \n' +
  '...............................................#        \n' +
  '#######........................................#        \n' +
  '       #####...................................#        \n' +
  '            ###...............................#         \n' +
  '               ###...........................#          \n' +
  '                  #~~~...........~~~~~~~~~~~#           \n' +
  '        ""         ##~~~.......~~~~~~~~~~~~#            \n' +
  '       """"          #~~~~.....~~~~~~~~~~~#   ""        \n' +
  '       """"""         #~~~~...~~~~~~~~~~~#     """      \n' +
  '                      #~~~~...~~~~~~~~~~~#    """       \n' +
  '                      #~~~~...~~~~~~~~~~~#     ""       \n' +
  '                       #~~~~.~~~~~~~~~~~#               ',
  '' +
  '                       #111111111111111#                \n' +
  '                       #                #               \n' +
  '                      #                  #              \n' +
  '                    ##                    ##            \n' +
  '                 ###                        #           \n' +
  '         ########                            #          \n' +
  '#########                                     #         \n' +
  '3                                              #        \n' +
  '3                                              #        \n' +
  '3                                              #        \n' +
  '3                                              #        \n' +
  '#######                                        #        \n' +
  '       #####                                   #        \n' +
  '            ###                               #         \n' +
  '               ###                           #          \n' +
  '                  #                         #           \n' +
  '                   ##                      #            \n' +
  '                     #                    #             \n' +
  '                      #     @            #              \n' +
  '                      #                  #              \n' +
  '                      #                  #              \n' +
  '                       #2222222222222222#               ',
  new Map([
    [ '1', 'hit_sword' ],
    [ '2', 'leave_rock' ],
    [ '3', 'rotating' ],
  ]),
  new Map([
    [ '~', '#0000FF'],
    [ '"', '#00FF00'],
  ]),
  undefined,
  '#020302',
  undefined,
  new TargetSpawner(function(state: SpawnerState): void {
    state.targets.push(new Target(new Pos(26 + state.tick, -1), 'v', 1, 1));
    state.targets.push(new Target(new Pos(-1, 7 + state.tick), '>', 1, 1));

    state.tick = (state.tick + 1) % 4;
  }, function(symbol: string): Pos {
    if (symbol === 'v') {
      return new Pos(0, 1);
    } else {
      return new Pos(1, 0);
    }
  }, function(pv: number): string {
    return '#00FFFF';
  }),
  undefined,
  undefined,
);

const rotating = new LevelMap('' +
  '                   #................#                   \n' +
  '        """       #.................#             ""    \n' +
  '      """"       #...................#           """"   \n' +
  '                #.....................##           ""   \n' +
  '               #........................##              \n' +
  '              #...........................###           \n' +
  '             #...............................###########\n' +
  '            #...........................................\n' +
  '            #...........................................\n' +
  '            #...........................................\n' +
  '            #...........................................\n' +
  '            #....................................#######\n' +
  '             #.................................##       \n' +
  '              #...............................#         \n' +
  '               ##............................#          \n' +
  '                 ##.........................#           \n' +
  '                   ##~....................~#            \n' +
  ' """"                #~~~...............~~~#            \n' +
  '   """"               #~~~~..........~~~~~#             \n' +
  '                       #~~~~~~~~~~~~~~~~~~#             \n' +
  '                       #~~~~~~~~~~~~~~~~~#              \n' +
  '                       #~~~~~~~~~~~~~~~~#               ',
  '' +
  '                   #1111111111111111#                   \n' +
  '                  #                 #                   \n' +
  '                 #                   #                  \n' +
  '                #                     ##                \n' +
  '               #                        ##              \n' +
  '              #                           ###           \n' +
  '             #                               ###########\n' +
  '            #                                          3\n' +
  '            #                                     @    3\n' +
  '            #                                          3\n' +
  '            #                                          3\n' +
  '            #                                    #######\n' +
  '             #                                 ##       \n' +
  '              #                               #         \n' +
  '               ##                            #          \n' +
  '                 ##                         #           \n' +
  '                   ##                      #            \n' +
  '                     #                     #            \n' +
  '                      #                   #             \n' +
  '                       #                  #             \n' +
  '                       #                 #              \n' +
  '                       #                #               ',
  new Map([
    [ '1', 'sword_treasure2' ],
    [ '3', 'sword_only' ],
  ]),
  new Map([
    [ '~', '#0000FF'],
    [ '"', '#00FF00'],
  ]),
  undefined,
  '#020302',
  undefined,
  new TargetSpawner(function(state: SpawnerState): void {
    if (state.tick !== 2) {
      state.targets.push(new Target(new Pos(56, 7 + state.tick), '<', 1, 1));
      state.targets.push(new Target(new Pos(56, 9 + state.tick), '<', 1, 1));
    }
    state.tick = (state.tick + 1) % 3;
  }, function(symbol: string): Pos {
    return new Pos(-1, 0);
  }, function(pv: number): string {
    return '#00FFFF';
  }),
  undefined,
  undefined,
);

const sword_treasure2 = new LevelMap('' +
  '                                                        \n' +
  '                                             ~~~~       \n' +
  '    ~~~~                                       ~~~~     \n' +
  '      ~~~~~~                                            \n' +
  '              #############################             \n' +
  '         #####.............................####         \n' +
  '       ##......................................##       \n' +
  '      #..........................................#      \n' +
  '     #............................................#     \n' +
  '     #............................................#     \n' +
  '     #............................................#     \n' +
  '     #............................................#     \n' +
  '      #..........................................#      \n' +
  '       ##......................................##       \n' +
  '         #####............................#####         \n' +
  '              ####....................####              \n' +
  '                  #..................#       ~~         \n' +
  '      ~~~~~~      #..................#        ~~~       \n' +
  '   ~~~~~~~        #..................#                  \n' +
  '      ~~~~~~      #..................#                  \n' +
  '                  #..................#                  \n' +
  '                   #................#                   ',
  '' +
  '                                                        \n' +
  '                                                        \n' +
  '                                                        \n' +
  '                                                        \n' +
  '              #############################             \n' +
  '         #####                             ####         \n' +
  '       ##                                      ##       \n' +
  '      #                                          #      \n' +
  '     #          $                                 #     \n' +
  '     #        $$$$                                #     \n' +
  '     #        $  $                    \\           #     \n' +
  '     #         $$                                 #     \n' +
  '      #                                          #      \n' +
  '       ##                                      ##       \n' +
  '         #####                            #####         \n' +
  '              ####                    ####              \n' +
  '                  #                  #                  \n' +
  '                  #                  #                  \n' +
  '                  #                  #                  \n' +
  '                  #                  #                  \n' +
  '                  #                  #                  \n' +
  '                   #1111111111111111#                   ',
  new Map([
    [ '1', 'rotating' ],
  ]),
  new Map([
    ['#', '#555555'],
    ['~', '#0000FF'],
  ]),
  undefined,
  '#050500',
  undefined,
  undefined,
  undefined,
  undefined,
);

const hit_sword = new LevelMap('' +
  '                           #~~...~~#                    \n' +
  '                           #~~...~~#                    \n' +
  '        ~~~                #~.....~#                    \n' +
  '      ~~~~                #~~......~#                   \n' +
  '                         #~~........~#        ~~~~      \n' +
  '                        #~~.........~~#      ~~~~~~~    \n' +
  '                        #~...........~#         ~~      \n' +
  '                        #~...........~#                 \n' +
  '     ~~~                #~...........~#                 \n' +
  '      ~~~               #.............#                 \n' +
  '                        #.............#                 \n' +
  '                        #.............#                 \n' +
  '                        #.............#                 \n' +
  '                        #.............#                 \n' +
  '                        #.............#                 \n' +
  '                        #~~~.....~~~~~#                 \n' +
  '          ~~            #~~~.....~~~~~#   ~~~~          \n' +
  '        ~~~~~~          #~~~...~~~~~~~#     ~~~~        \n' +
  '           ~~           #~~~...~~~~~~~#                 \n' +
  '                        #~~...~~~~~~~~#                 \n' +
  '                        #~~...~~~~~~~~#                 \n' +
  '                       #~~~~.~~~~~~~~~~#                ',
  '' +
  '                           #2222222#                    \n' +
  '                           #       #                    \n' +
  '                           #       #                    \n' +
  '                          #         #                   \n' +
  '                         #           #                  \n' +
  '                        #             #                 \n' +
  '                        #             #                 \n' +
  '                        #             #                 \n' +
  '                        #             #                 \n' +
  '                        #             #                 \n' +
  '                        #             #                 \n' +
  '                        #             #                 \n' +
  '                        #             #                 \n' +
  '                        #             #                 \n' +
  '                        #             #                 \n' +
  '                        #             #                 \n' +
  '                        #             #                 \n' +
  '                        #             #                 \n' +
  '                        #             #                 \n' +
  '                        #   @         #                 \n' +
  '                        #             #                 \n' +
  '                       #111111111111111#                ',
  new Map([
    [ '1', 'sword_only' ],
    [ '2', 'last_challenge' ],
  ]),
  new Map([
    [ '~', '#0000FF'],
    [ '"', '#00FF00'],
  ]),
  undefined,
  '#020302',
  undefined,
  new TargetSpawner(function(state: SpawnerState): void {
    if (state.tick === 0) {
      state.targets.push(new Target(new Pos(30, -1), 'O', 3, 3));
      state.targets.push(new Target(new Pos(31, -1), 'O', 3, 3));
      state.targets.push(new Target(new Pos(32, -1), 'O', 3, 3));
    }

    state.tick = (state.tick + 1) % 3;
  }, function(symbol: string): Pos {
    return new Pos(0, 1);
  }, function(pv: number): string {
    if (pv === 3) {
      return '#00FF00';
    } else if (pv === 2) {
      return '#FFAA00';
    } else {
      return '#FF0000';
    }
  }),
  undefined,
  undefined,
);

const last_challenge = new LevelMap('' +
  '                                                        \n' +
  '                                                        \n' +
  '##################################                      \n' +
  '..................................##                    \n' +
  '....................................##                  \n' +
  '......................................#                 \n' +
  '.......................................#                \n' +
  '########################................#               \n' +
  '                        #................#              \n' +
  '      ~~~              #..................#             \n' +
  '                     ##....................#            \n' +
  '#####################.......................#           \n' +
  '............................................#           \n' +
  '............................................#           \n' +
  '............................................#           \n' +
  '####################.......................#            \n' +
  '                    #######...........~~~~#             \n' +
  '           ~~~             ##........~~~~#              \n' +
  '         ~~~~                #.......~~~#               \n' +
  '                             #.....~~~##                \n' +
  '                            #.....~~##                  \n' +
  '                           #~~...~~#                    ',
  '' +
  '                                                        \n' +
  '                                                        \n' +
  '##################################                      \n' +
  '1                                 ##                    \n' +
  '1                                   ##                  \n' +
  '1                                     #                 \n' +
  '1                                      #                \n' +
  '########################                #               \n' +
  '                        #                #              \n' +
  '                       #                  #             \n' +
  '#######################                    #            \n' +
  '                                            #           \n' +
  '                                            #           \n' +
  '                                            #           \n' +
  '                                            #           \n' +
  '####################                       #            \n' +
  '                    #######               #             \n' +
  '                           ##            #              \n' +
  '                             #          #               \n' +
  '                             #        ##                \n' +
  '                            #       ##                  \n' +
  '                           #2222222#                    ',
  new Map([
    [ '2', 'hit_sword' ],
    [ '1', 'treasure' ],
  ]),
  new Map([
    [ '~', '#0000FF'],
    [ '"', '#00FF00'],
  ]),
  undefined,
  '#020302',
  undefined,
  new TargetSpawner(function(state: SpawnerState): void {
    state.targets.push(new Target(new Pos(-1, 3 + state.tick), 'O', 1, 1));
    state.targets.push(new Target(new Pos(-1, 5 + state.tick), 'O', 1, 1));

    state.targets.push(new Target(new Pos(-1, 11 + state.tick), '>', 1, 1));
    state.targets.push(new Target(new Pos(-1, 13 + state.tick), '>', 1, 1));

    state.tick = (state.tick + 1) % 2;
  }, function(symbol: string): Pos {
    return new Pos(1, 0);
  }, function(pv: number): string {
    return '#00FFFF';
  }),
  undefined,
  undefined,
);

const treasure = new LevelMap('' +
  '                                                        \n' +
  '                                             ~~~~       \n' +
  '    ~~~~                                       ~~~~     \n' +
  '      ~~~~~~                                            \n' +
  '              #############################             \n' +
  '         #####.............................####         \n' +
  '       ##......................................##       \n' +
  '      #..........................................#      \n' +
  '     #............................................#     \n' +
  '     #............................................#     \n' +
  '     #............................................#     \n' +
  '     #............................................#     \n' +
  '      #..........................................#      \n' +
  '       ##......................................##       \n' +
  '         #####............................#####         \n' +
  '              ####....................####              \n' +
  '                  #..................#       ~~         \n' +
  '      ~~~~~~      #..................#        ~~~       \n' +
  '   ~~~~~~~        #..................#                  \n' +
  '      ~~~~~~      #..................#                  \n' +
  '                  #..................#                  \n' +
  '                   #................#                   ',
  '' +
  '                                                        \n' +
  '                                                        \n' +
  '                                                        \n' +
  '                                                        \n' +
  '              #############################             \n' +
  '         #####                             ####         \n' +
  '       ##                                      ##       \n' +
  '      #                                          #      \n' +
  '     #          $                                 #     \n' +
  '     #        $$$$                                #     \n' +
  '     #        $  $                    \\           #     \n' +
  '     #         $$                                 #     \n' +
  '      #                                          #      \n' +
  '       ##                                      ##       \n' +
  '         #####                            #####         \n' +
  '              ####                    ####              \n' +
  '                  #                  #                  \n' +
  '                  #                  #                  \n' +
  '                  #                  #                  \n' +
  '                  #                  #                  \n' +
  '                  #                  #                  \n' +
  '                   #1111111111111111#                   ',
  new Map([
    [ '1', 'rotating' ],
  ]),
  new Map([
    ['#', '#555555'],
    ['~', '#0000FF'],
  ]),
  undefined,
  '#050500',
  undefined,
  undefined,
  undefined,
  undefined,
);

export const AllMaps: Map<string, LevelMap> = new Map([
  [ 'bateau', bateau ],
  [ 'mission', mission ],
  [ 'outside', outside ],
  [ 'training', training ],
  [ 'spike', spike ],
  [ 'spike2', spike2 ],
  [ 'sword_treasure', sword_treasure ],
  [ 'leave_rock', leave_rock ],
  [ 'sword_only', sword_only ],
  [ 'rotating', rotating ],
  [ 'sword_treasure2', sword_treasure2 ],
  [ 'hit_sword', hit_sword ],
  [ 'last_challenge', last_challenge ],
  [ 'treasure', treasure ],
]);

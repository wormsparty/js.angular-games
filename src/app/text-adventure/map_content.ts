import {LevelMap, Pos} from './map_logic';
import {Labyrinth} from './labyrinth';
import {SpawnerState, Target, TargetSpawner} from './target';

const bateau = new LevelMap('' +
  '                                           ~~~~~~~~~~~~~\n' +
  '                                                ~~~~~~~~\n' +
  '                                                 ~~~~~~~\n' +
  '                                              ~~~~~~~~~~\n' +
  '                                    ##        ~~~~~~~~~~\n' +
  '                                 *********        ~~~~~~\n' +
  '                               ***********          ~~~~\n' +
  '                             *************           ~~~\n' +
  '                             **************      ~~~~~~~\n' +
  '                             **************     ~~~~~~~~\n' +
  '                             **************  ~~~~~~~~~~~\n' +
  '                              ************~~~~~~~~~~~~~~\n' +
  '                         ~~~~~~~~********~~~~~~~~~~~~~~~\n' +
  '                    ~~~~~~~~~~~~~~~~##~~~~~~~~~~~~~~~~~~\n' +
  '               ~~~~~~~############################~~~###\n' +
  '            ~~~~~~~~~~~#................................\n' +
  '          ~~~~~~~~~~~~~~##.................>.....#~~~###\n' +
  '           ~~~~~~~~~~~~~~~#######################~~~~~~~\n' +
  '               ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n' +
  '                         ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n' +
  '                                 ~~~~~~~~~~~~~~~~~~~~~~~\n' +
  '                                          ~~~~~~~~~~~~~~',
  '' +
  '                                                        \n' +
  '                                                        \n' +
  '                                                        \n' +
  '                                                        \n' +
  '                                    ##                  \n' +
  '                                                        \n' +
  '                                                        \n' +
  '                                                        \n' +
  '                                                        \n' +
  '                                                        \n' +
  '                                                        \n' +
  '                                                        \n' +
  '                                                        \n' +
  '                                    ##                  \n' +
  '                      ############################   ###\n' +
  '                       #     @                         1\n' +
  '                        ##                 >     #   ###\n' +
  '                          #######################       \n' +
  '                                                        \n' +
  '                                                        \n' +
  '                                                        \n' +
  '                                                        ',
  new Map([
    ['1', 'mission'],
    ['>', 'dans-bateau'],
  ]),
  new Map([
    ['~', '#0000FF'],
    ['.', '#FF7700'],
    ['#', '#AA3300'],
    ['>', '#FFFFFF'],
  ]),
  {
    'en': {
      'Thirsty for adventure,': new Pos(4, 3),
      'you sailed to new lands.': new Pos(4, 4),
      'After quiet and storm,': new Pos(4, 6),
      'filled with hope, you': new Pos(4, 7),
      'finally land.': new Pos(4, 8),
    },
    'fr': {
      'En soif de nouvelles aventures,': new Pos(4, 3),
      'vous avez pris le large.': new Pos(4, 4),
      'Après calme et tempêtes,': new Pos(4, 6),
      'rempli d\'espoirs, vous': new Pos(4, 7),
      'accostez sur une': new Pos(4, 8),
      'terre nouvelle.': new Pos(4, 9),
    },
  },
  '#000005',
  undefined,
  undefined,
  undefined);

const dans_bateau = new LevelMap('' +
  '                                                 ~~~~~~~\n' +
  '                                                     ~~~\n' +
  '                                              ~~~~~~~~~~\n' +
  '                                      ~~~~~~~~~~~~~~~~~~\n' +
  '                      ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n' +
  '              ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n' +
  '     ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n' +
  '    ~##############################################~~~~~\n' +
  '   ~~~#..........................................#~~~~~~\n' +
  '  ~~~~~#................................<.......#~~~~~~~\n' +
  '  ~~~~~~#......................................#~~~~~~~~\n' +
  '   ~~~~~~#....................................#~~~~~~~~~\n' +
  '    ~~~~~~##................................##~~~~~~~~~~\n' +
  '     ~~~~~~~################################~~~~~~~~~~~~\n' +
  '       ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n' +
  '          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n' +
  '                ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n' +
  '                        ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n' +
  '                                   ~~~~~~~~~~~~~~~~~~~~~\n' +
  '                                                 ~~~~~~~\n' +
  '                                                    ~~~~\n' +
  '                                                      ~~',
  '' +
  '                                                        \n' +
  '                                                        \n' +
  '                                                        \n' +
  '                                                        \n' +
  '                                                        \n' +
  '                                                        \n' +
  '                                                        \n' +
  '     ##############################################     \n' +
  '      #                                          #      \n' +
  '       #         $$                     <       #       \n' +
  '        #        $$    /         @             #        \n' +
  '         #       $$                           #         \n' +
  '          ##                                ##          \n' +
  '            ################################            \n' +
  '                                                        \n' +
  '                                                        \n' +
  '                                                        \n' +
  '                                                        \n' +
  '                                                        \n' +
  '                                                        \n' +
  '                                                        \n' +
  '                                                        ',
  new Map([
    ['<', 'bateau'],
  ]),
  new Map([
    ['~', '#0000FF'],
    ['.', '#FF7700'],
    ['#', '#AA3300'],
    ['<', '#FFFFFF'],
  ]),
  undefined,
  '#000005',
  undefined,
  undefined,
  undefined,
);

const mission = new LevelMap('' +
  '                                                        \n' +
  '         ***************************************        \n' +
  '        *                                       *       \n' +
  '       *             ------------                *      \n' +
  '       *            ------[]------         $     *      \n' +
  '       *            --------------  $      $     *      \n' +
  '       *         $  --------------  $      $     *      \n' +
  '   ~~~~*  $   $  $  --------------  $  $   $     *~~~~~ \n' +
  '  ~~~~~~*                                        *~~~~~~\n' +
  '~~~~~~~~~***********************     ************~~~~~~~\n' +
  '~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~**  *~~~~~~~~~~~~~~~~~~~\n' +
  '~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~**~~~~~~~~~~~~~~~~~~~~\n' +
  '~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~###*####################\n' +
  '################################...m....................\n' +
  '........................................................\n' +
  '################################........................\n' +
  '~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~########################\n' +
  '~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ \n' +
  '    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~        \n' +
  '           ~~~~~~~~~~~~~~~~~~                           \n' +
  '               ~~~~~~~~~~~                              \n' +
  '                                                        ',
  '' +
  '                                                        \n' +
  '                                                        \n' +
  '                                                        \n' +
  '                                                        \n' +
  '                                                        \n' +
  '                                                        \n' +
  '                                                        \n' +
  '                                                        \n' +
  '                                                        \n' +
  '                                                        \n' +
  '                                                        \n' +
  '                                                        \n' +
  '                                ### ####################\n' +
  '################################                       2\n' +
  '1                                                      2\n' +
  '################################                       2\n' +
  '                                ########################\n' +
  '                                                        \n' +
  '                                                        \n' +
  '                                                        \n' +
  '                                                        \n' +
  '                                                        ',
  new Map([
    ['1', 'bateau'],
    ['2', 'outside'],
  ]),
  new Map([
    ['~', '#0000FF'],
    ['.', '#FF7700'],
    ['#', '#AA3300'],
    ['*', '#FFFFFF'],
  ]),
  undefined,
  '#000005',
  undefined,
  undefined,
  undefined,
);

const outside = new LevelMap('' +
  '      """"""              #############                 \n' +
  '       """"             ##.............#    """""""     \n' +
  '                    ####................##    """"""    \n' +
  '                  ##......................##            \n' +
  '                 #..........................##          \n' +
  '                #.............................##########\n' +
  '     """"       #.......................................\n' +
  '    """"""       #......................................\n' +
  '     """"       #.........^.............^...............\n' +
  '               #..........^.............^...............\n' +
  '            ###...........^.............^.............##\n' +
  '       #####..............^.............^............#  \n' +
  '#######...................^.............^...........#   \n' +
  '..........................^.............^.........##    \n' +
  '...............................................###      \n' +
  '............................................###         \n' +
  '#######...................................##            \n' +
  '       ##............####................#     ""       \n' +
  '         #.........##    ##..............#    """       \n' +
  '          ##.....##        ##..........##     ""        \n' +
  '            #####    """     ##########                 \n' +
  '                    """""                               ',
  '' +
  '                          #############                 \n' +
  '                        ##             #                \n' +
  '                    ####                ##              \n' +
  '                  ##                      ##            \n' +
  '                 #                          ##          \n' +
  '                #                             ##########\n' +
  '                #                                      5\n' +
  '                 #                                     5\n' +
  '                #                                      5\n' +
  '               #            *         *                5\n' +
  '            ###             *  mmmmm  *               ##\n' +
  '       #####                *  mmmmm  *              #  \n' +
  '#######                     *         *             #   \n' +
  '2                                                 ##    \n' +
  '2                                              ###      \n' +
  '2                                           ###         \n' +
  '#######                                   ##            \n' +
  '       ##            ####                #              \n' +
  '         #         ##    ##              #              \n' +
  '          ##     ##        ##          ##               \n' +
  '            #####            ##########                 \n' +
  '                                                        ',
  new Map([
    [ '2', 'mission' ],
//    [ '4', 'cathedrale' ],
    [ '5', 'training' ],
    [ '<', 'guet' ],
  ]),
  new Map([
    ['$', '#FF00AA'],
    ['#', '#555555'],
    ['.', '#333333'],
    ['"', '#00FF00'],
    ['^', '#FFFF00'],
    ['>', '#FFFFFF'],
    ['<', '#FFFFFF'],
  ]),
  undefined,
  '#050505',
  undefined,
  undefined,
  undefined,
);

const training = new LevelMap('' +
  '                       #~~~~~~~~~~~~~~~~#               \n' +
  '                       #~~~~~~~~~~~~~~~~#               \n' +
  '                      #~~~........~~~~~~~#              \n' +
  '#####               ##~~..............~~~~##            \n' +
  '.....####        ###........................###         \n' +
  '.........########..............................###      \n' +
  '..................................................######\n' +
  '.....######.............................................\n' +
  '#####      #####........................................\n' +
  '                ##......................................\n' +
  '                  #.....................................\n' +
  '                   #.................................###\n' +
  '                   #................................#   \n' +
  '                  #...............................##    \n' +
  '                 #~~~~.........................###      \n' +
  '               ##~~~~~~...............~~~~~####         \n' +
  '            ###~~~~~~~~~~......~~~~~~~~####             \n' +
  '          ##~~~~~~~~~~~~~~~~~~~~~~~~~~#                 \n' +
  '         #~~~~~~~~~~~~~~~~~~~~~~~~~~~#                  \n' +
  '        #~~~~~~~~~~~~~~~~~~~~~~~~~~~~~##                \n' +
  '       #~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~##              \n' +
  '       #~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~#             ',
  '' +
  '                       #                #               \n' +
  '                       #                #               \n' +
  '                      #                  #              \n' +
  '#####               ##                    ##            \n' +
  '5    ####        ###                        ###         \n' +
  '5        ########                              ###      \n' +
  '5 @                                               ######\n' +
  '5    ######                                             \n' +
  '#####      #####                                        \n' +
  '                ##                                      \n' +
  '                  #                                     \n' +
  '                   #                                 ###\n' +
  '                   #                                #   \n' +
  '                  #                               ##    \n' +
  '                 #                             ###      \n' +
  '               ##                          ####         \n' +
  '            ###                        ####             \n' +
  '          ##                          #                 \n' +
  '         #                           #                  \n' +
  '        #                             ##                \n' +
  '       #                                ##              \n' +
  '       #                                  #             ',
  new Map([
    [ '5', 'outside' ],
  ]),
  new Map([
    [ '~', '#0000FF'],
  ]),
  undefined,
  undefined,
  undefined,
  undefined,
  new TargetSpawner(function(state: SpawnerState): void {
    state.tick = state.tick % 20;

    if (state.tick >= 16) {
      return;
    }

    state.targets.push(new Target(new Pos(24 + 16 - state.tick, -1), 'O', 3, 3));
    state.targets.push(new Target(new Pos(24 + 15 - state.tick, -1), 'O', 3, 3));
  }, function(): Pos {
    return new Pos(0, 1);
  }, function(pv: number): string {
    if (pv === 3) {
      return '#00FF00';
    } else if (pv === 2) {
      return '#FF9900';
    } else {
      return '#FF0000';
    }
  }),
);

export const AllMaps: Map<string, LevelMap> = new Map([
  [ 'bateau', bateau ],
  [ 'dans-bateau', dans_bateau ],
  [ 'mission', mission ],
  [ 'outside', outside ],
  [ 'training', training ],
]);
